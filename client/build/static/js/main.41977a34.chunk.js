(this["webpackJsonpencryptor-frontend"]=this["webpackJsonpencryptor-frontend"]||[]).push([[0],{22:function(e,t,s){},23:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),c=s(7),n=s.n(c),i=s(5),l=s(3),o=s(2),u=s.n(o),d=s(4);function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,s=void 0===t?void 0:t,r=e.onEvent,c=void 0!==r&&r,n=Object(i.b)(),o=Object(a.useCallback)(Object(d.a)(u.a.mark((function e(){var t,a,r,c,i,l,o,d=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:{},a=t.callbackURL,r=void 0===a?s:a,c=t.fetchOptions,i=void 0===c?{}:c,r){e.next=3;break}return e.abrupt("return");case 3:return n({type:"SET_LOADING_ON"}),e.prev=4,e.next=7,fetch(r,i);case 7:return l=e.sent,e.next=10,l.json();case 10:return o=e.sent,e.abrupt("return",{ok:!0,data:o});case 14:return e.prev=14,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",{ok:!1,data:e.t0});case 18:return e.prev=18,n({type:"SET_LOADING_OFF"}),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,14,18,21]])}))),[s,n]),j=Object(a.useState)({}),b=Object(l.a)(j,2),p=b[0],m=b[1],O=Object(a.useState)(0),h=Object(l.a)(O,2),v=h[0],x=h[1],f=function(){x(v+1)};return Object(a.useEffect)((function(){if(!c){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return n({type:"SET_LOADING_ON"}),e.prev=3,e.next=6,fetch(s);case 6:return t=e.sent,e.next=9,t.json();case 9:a=e.sent,m({ok:!0,data:a}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),m({ok:!1,data:e.t0});case 17:return e.prev=17,n({type:"SET_LOADING_OFF"}),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})));return function(){return e.apply(this,arguments)}}();e()}}),[s,c,v,n]),c?o:{response:p,refetch:f}}var b=s(0);function p(e){var t=e.privateKey,s=e.setPrivateKey,r=e.setEncryptedMessage,c=j({onEvent:!0}),n=Object(a.useState)(""),i=Object(l.a)(n,2),o=i[0],p=i[1],m=function(){var e=Object(d.a)(u.a.mark((function e(t){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.trim()){e.next=3;break}return r(""),e.abrupt("return",{status:"empty_field"});case 3:return e.next=5,c({callbackURL:"/api/messages/".concat(t)});case 5:if("Requested message does not exist in database"===(s=e.sent).data){e.next=11;break}return r(s.data.encryptedMessage),e.abrupt("return",{status:"found"});case 11:return r(""),e.abrupt("return",{status:"not_found"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(o);case 2:if(null!==e.sent.status.match(/^(empty_field|not_found)$/)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,m(t);case 7:if(null===e.sent.status.match(/^(empty_field|not_found)$/)){e.next=10;break}return e.abrupt("return",r("MESSAGE NOT FOUND please check your message ID or private key"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"mb-4 row",children:[Object(b.jsx)("label",{htmlFor:"inputMessageID",className:"col-sm-2 col-form-label",children:"Message ID"}),Object(b.jsx)("div",{className:"col-sm-10",children:Object(b.jsx)("input",{value:o,placeholder:"Your message ID",onChange:function(e){return p(e.target.value)},className:"form-control",id:"inputMessageID"})})]}),Object(b.jsxs)("div",{className:"mb-4 row",children:[Object(b.jsx)("label",{htmlFor:"inputPrivateKey",className:"col-sm-2 col-form-label",children:"Private Key"}),Object(b.jsx)("div",{className:"col-sm-10",children:Object(b.jsx)("input",{className:"form-control",id:"inputPrivateKey",value:t,placeholder:"Your private key",onChange:function(e){return s(e.target.value)}})})]}),Object(b.jsx)("div",{className:"mb-4 row",children:Object(b.jsx)("div",{className:"d-grid gap-2",children:Object(b.jsx)("button",{type:"button",className:"btn btn-info",onClick:O,children:"Retrieve Message"})})})]})}function m(e){var t=e.encryptedMessage,s=e.setEncryptedMessage,r=e.privateKey,c=j({onEvent:!0}),n=Object(a.useState)({}),i=Object(l.a)(n,2),o=i[0],p=i[1],m=function(){var e=Object(d.a)(u.a.mark((function e(){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({callbackURL:"/api/messages/decrypt",fetchOptions:{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({privateKey:r,encryptedMessage:t})}});case 2:s=e.sent,p(s);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"mb-4 row",children:[Object(b.jsx)("label",{htmlFor:"inputEncryptedMessage",className:"col-sm-2 col-form-label",children:"Encrypted Message"}),Object(b.jsxs)("div",{className:"col-sm-10",children:[Object(b.jsx)("textarea",{id:"inputEncryptedMessage",className:"form-control",rows:"5",onChange:function(e){return s(e.target.value)},value:t,placeholder:"Your encrypted message"})," "]})]}),Object(b.jsx)("div",{className:"mb-4 row",children:Object(b.jsx)("div",{className:"d-grid gap-2",children:Object(b.jsx)("button",{type:"button",className:"btn btn-danger",onClick:m,children:"Decrypt Message"})})}),Object(b.jsxs)("div",{className:"mb-4 row",children:[Object(b.jsx)("label",{className:"col-sm-2 col-form-label",children:"Decrypted Message"}),Object(b.jsxs)("div",{className:"col-sm-10",children:[Object(b.jsx)("textarea",{className:"form-control",rows:"5",placeholder:"Your decrypted message",value:o.data&&o.data.decryptedMessage,readOnly:!0})," "]})]})]})}function O(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),s=t[0],r=t[1],c=Object(a.useState)(""),n=Object(l.a)(c,2),i=n[0],o=n[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"display-6 mb-5",children:"Decrypt my message"}),Object(b.jsx)(p,{setEncryptedMessage:r,privateKey:i,setPrivateKey:o}),Object(b.jsx)(m,{encryptedMessage:s,setEncryptedMessage:r,privateKey:i})]})}var h=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function v(e){var t=e.privateKey,s=e.setPrivateKey,a=j({onEvent:!0}),r=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({callbackURL:"/api/generate-key"});case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"mb-4 row",children:[Object(b.jsx)("label",{className:"col-sm-2 col-form-label",children:"Private Key"}),Object(b.jsx)("div",{className:"col-lg-7",children:Object(b.jsx)("input",{className:"form-control",value:t,placeholder:"Generate a private key for encryption",readOnly:!0})}),Object(b.jsx)("div",{className:"col-lg-1",children:Object(b.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return h(t)},children:Object(b.jsx)("i",{className:"far fa-clipboard"})})}),Object(b.jsx)("div",{className:"col-lg-2",children:Object(b.jsx)("div",{className:"d-grid gap-2",children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:r,children:"Generate"})})})]})}function x(e){var t=e.privateKey,s=e.refetchMessages,r=Object(a.useState)(""),c=Object(l.a)(r,2),n=c[0],i=c[1],o=Object(a.useState)(""),p=Object(l.a)(o,2),m=p[0],O=p[1],h=j({onEvent:!0}),v=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({callbackURL:"/api/messages",fetchOptions:{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(document.cookie.slice(11)," ")},body:JSON.stringify({originalMessage:n,privateKey:t})}});case 2:a=e.sent,O(a.data.encryptedMessage),s();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"mb-4 row",children:[Object(b.jsx)("label",{htmlFor:"inputMessage",className:"col-sm-2 col-form-label",value:n,children:"Your message"}),Object(b.jsx)("div",{className:"col-sm-10",children:Object(b.jsx)("input",{className:"form-control",id:"inputMessage",onChange:function(e){return i(e.target.value)}})})]}),Object(b.jsx)("div",{className:"mb-4 row",children:Object(b.jsx)("div",{className:"d-grid gap-2",children:Object(b.jsx)("button",{type:"button",className:"btn btn-success",onClick:v,children:"Submit / Encrypt"})})}),Object(b.jsxs)("div",{className:"mb-4 row",children:[Object(b.jsx)("label",{className:"col-sm-2 col-form-label",children:"Encrypted Message"}),Object(b.jsxs)("div",{className:"col-sm-10",children:[Object(b.jsx)("textarea",{className:"form-control",rows:"5",readOnly:!0,placeholder:"Your message after submitting the encryption request...",value:m})," "]})]})]})}function f(e){var t=e.refetchMessages,s=Object(a.useState)(""),r=Object(l.a)(s,2),c=r[0],n=r[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"display-6 mb-5",children:"Encrypt my message"}),Object(b.jsx)(v,{privateKey:c,setPrivateKey:n}),Object(b.jsx)(x,{privateKey:c,refetchMessages:t})]})}function g(e){var t=e.messages;return Object(b.jsxs)("div",{className:"table-responsive",children:[Object(b.jsx)("h1",{className:"display-6 mb-5",children:"Messages Log"}),Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"#"}),Object(b.jsx)("th",{scope:"col",children:"ID"}),Object(b.jsx)("th",{scope:"col",children:"Original Message"}),Object(b.jsx)("th",{scope:"col",children:"Encrypted Message"}),Object(b.jsx)("th",{scope:"col",children:"Private Key"}),Object(b.jsx)("th",{scope:"col",children:"Date"}),Object(b.jsx)("th",{scope:"col",children:"Time"})]})}),Object(b.jsx)("tbody",{children:t.data&&t.data.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:t+1}),Object(b.jsx)("td",{children:e.messageID}),Object(b.jsx)("td",{children:e.originalMessage}),Object(b.jsx)("td",{children:e.encryptedMessage}),Object(b.jsx)("td",{children:e.privateKey}),Object(b.jsx)("td",{children:e.date}),Object(b.jsx)("td",{children:e.time})]},e.messageID)}))})]})]})}s(22);var y=function(){return Object(b.jsx)("div",{className:"loading"})};function N(){var e=Object(i.c)((function(e){return e.loading})),t=j({url:"/api/messages"}),s=t.response,a=t.refetch;return Object(b.jsxs)("div",{className:"container-fluid",children:[e&&Object(b.jsx)(y,{}),Object(b.jsxs)("div",{className:"row justify-content-around mb-5",children:[Object(b.jsx)("div",{className:"col-lg-5",children:Object(b.jsx)(f,{refetchMessages:a})}),Object(b.jsx)("div",{className:"col-lg-5",children:Object(b.jsx)(O,{})})]}),Object(b.jsx)("div",{className:"row justify-content-center",children:Object(b.jsx)("div",{className:"col-lg-11",children:Object(b.jsx)(g,{messages:s})})})]})}var k=s(6),w=s(11),M={loading:!1},E=Object(w.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_ON":return Object(k.a)(Object(k.a)({},e),{},{loading:!0});case"SET_LOADING_OFF":return Object(k.a)(Object(k.a)({},e),{},{loading:!1});default:return e}}));n.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(i.a,{store:E,children:Object(b.jsx)(N,{})})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.41977a34.chunk.js.map